\section{Introduction}


%logic flow
Software defined network (SDN)~\cite{Benzekki2016Software,Sezer2013Are} paradigm
is a trend that enables flexible programmability for networks 
by using programmable data plane and centralized network controller~\cite{7122247}.
It shows remarkable strengths in network control, global optimization 
(e.g. throughputs~\cite{}, diagnosis~\cite{}, reliability~\cite{})
and easy deployment for new applications~\cite{Feamster2014The}.

With the support of SDN for networks, programmable artificial intelligence (AI) 
techniques~\cite{Norvig1995Artificial, Poole2010Artificial, Cockburn1996ARCHON} 
are easy to be implemented in networks \cite{}.
In turn, AI technique makes SDN become a smarter and more effective network system
due to its high performance in predicting and optimizing network capacity\cite{},
e.g. network throughput~\cite{}, energy consumption~\cite{}, etc.
 
Unfortunately, although Internet of Things (IoTs) \cite{Atzori2010The} 
make wireless sensor networks \cite{Potdar2009Wireless}
extremely pervasive and important, such as volcanic investigation 
\cite{Wernerallen2006Deploying}, and agriculture monitoring \cite{Wang2010L3SN}, 
there is no real implementation of SDN in a WSN. Existing works 
 \cite{mahmud2011exploitation, costanzo2012software, luo2012sensor, de2015tinysdn, galluccio2015sdn} 
all design frameworks of SDN for WSNs and validate them by simulations.  
Even worse, these simulational SDN works construct the central controller 
of SDN in their database station~\cite{}. The controller transmits control 
instructions with sensor nodes by multi-hop communications \cite{Mizuyama2017Estimation}.
This causes a great deal of energy consumption \cite{Yang2014}, which 
makes it a paradox since sensor network suffering from ought to be an energy-efficient and reliable network.

Moreover, to achieve intelligent WSNs, 
our observation is that AI methods 
are only able to be conducted in the SDN controller. 
This is due to two major reasons. 
First, traditional sensor devices 
have limited processing capability and cannot 
deal with complex computations \cite{Sharma2012Security,Heller2012The}.
Second, the sensor devices are also lack of storage space 
to support complicated operations. With the help of SDN, 
the central controller can conduct complex computations 
and store large-scale data information for WSNs.

We identify UAVs are the 

Adler~\cite{}, a recent testbed that combines WSNs~\cite{} 
and the unmanned aerial vehicle (UAV)~\cite{Cambone2005Unmanned, Perry2000Unmanned, Cathcart2014Method}
shows that UAVs enable WSNs to achieve resilience, 
high-performance and energy-efficience at the same time.
Specifically, UAVs are flexible to 
communicate with sensors by one-hop transmission
and thus reduce energy consumption compared to multi-hop communications.
Moreover, UAVs are capable to perform complex computations 
by their airborne computers with powerful CPUs and GPUs.
Although Alder is not a typical network, it provides a favorable proof
that UAVs are perfect to serve as the SDN controller.

Furthermore, the advantage of utilizing UAV compared to
terrestrial mobile controller is that, the air-ground communication range
is almost 10 times than that of ground-ground communication under ZigBee protocol~\cite{}, which are
around 145 meters and 15 meters respectively tested by our practical experiments.
This is due to the air-ground communication suffers from less interference of the terrestrial WSN.

In this paper, we present {\sdn}\footnote{In the Bible, {\sdn} is a word used to denote a messenger from God. }, 
a real UAV based SDN sensor system.
In {\sdn}, UAV plays the role of the central controller to monitor the sensor system.
We implemented five fundamental applications: routing, network diagnosis, 
AI energy prediction, AI node selection and multi-task,
and provide users with easy-to-use interfaces.
Routing application allows users to update the flow table of nodes.
Network diagnosis is used to find the fault source when network exception is detected.
Multi-task application enables sensor to perform multiple 
tasks simultaneously. All the applications are within a ecosystem
and can be combined to achieve synergistic effect. For example,
users can execute the AI node selection application to choose
the node set for the multi-task application. 


We use DJI M100 UAV with Intel NUC as airborne computer, 
and 100 TI CC2650 SensorTag to build our testbed.
We evaluated the five applications of  {\sdn} on this testbed, 
compared with their respective baselines LEACH RPL.
Our evaluation shows that:
\begin{itemize}
	\item[1)] {\sdn} has high performance. {\sdn} achieves {\simpleTput} higher
		throughput than RPL;
	\item[2)] {\sdn} is intelligent in self optimization. {\sdn} use AI
		selection and diagnosis algorithm to obtain an {\totalLife} increment
		compared with RPL;
	\item[3)] {\sdn} is resilient. As time goes by, {\sdn} maintains over
		{\pktRecvRatio} packet received ratio while others drop to 50\%
		sharply.
\end{itemize}

The main contribution of this paper is the first 
practical SDN wireless sensor network system, {\sdn}. 
{\sdn} realizes global optimization in a distributed WSN environment.
Other contributions include several simple but effective strategies and algorithms 
in the implemented applications of {\sdn}. {\sdn} has the potential to promote the adoption of IoTs



The paper is organized as follows. We introduce related works in the next section. 
Design of {\sdn} is presented in Section \ref{Arc}, 
and we implement five fundamental applications: routing, network diagnosis, 
AI prediction, AI node selection and multi-task in Section \ref{App}. 
Section \ref{Imp} gives the implement setup.
The evaluation results are provided in Section \ref{Eva} 
and we conclude the paper in Section \ref{Con}.

